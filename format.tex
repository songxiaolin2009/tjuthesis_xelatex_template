% !Mode:: "TeX:UTF-8"

\newcommand{\yihao}{\fontsize{26pt}{26pt}\selectfont}
\newcommand{\xiaoyi}{\fontsize{24pt}{24pt}\selectfont}
\newcommand{\erhao}{\fontsize{22pt}{1.25\baselineskip}\selectfont}
\newcommand{\xiaoer}{\fontsize{18pt}{18pt}\selectfont}
\newcommand{\sanhao}{\fontsize{16pt}{16pt}\selectfont}
\newcommand{\xiaosan}{\fontsize{15pt}{15pt}\selectfont}
\newcommand{\sihao}{\fontsize{14pt}{14pt}\selectfont}
\newcommand{\xiaosi}{\fontsize{12pt}{20pt}\selectfont}
\newcommand{\wuhao}{\fontsize{10.5pt}{10.5pt}\selectfont}
\newcommand{\xiaowu}{\fontsize{9pt}{9pt}\selectfont}
\setmainfont{Times New Roman}
\setsansfont{Arial}
%\setmonofont{Courier New}
\setCJKfamilyfont{song}{[simsun.ttc]}
\setCJKfamilyfont{fs}{[simfang.ttf]}
\setCJKfamilyfont{kai}{[simkai.ttf]}
\setCJKfamilyfont{hei}{[simhei.ttf]}
\newcommand{\song}{\CJKfamily{song}} 
\newcommand{\fs}{\CJKfamily{fs}} 
\newcommand{\kai}{\CJKfamily{kai}} 
\newcommand{\hei}{\CJKfamily{hei}} 

\newcommand\prechaptername{第}
\newcommand\postchaptername{章}

\setitemize{leftmargin=3em,itemsep=0em,partopsep=0em,parsep=0em,topsep=-0em}
\setenumerate{leftmargin=3em,itemsep=0em,partopsep=0em,parsep=0em,topsep=0em}
%\setlength{\baselineskip}{20pt}
%\renewcommand{\baselinestretch}{1.38}

\def\temp{\relax}
\let\temp\addcontentsline
\gdef\addcontentsline{\phantomsection\temp}
%\def\quad{\hspace{1em}}
%\def\qquad{\hspace{2em}}

\newcounter{pubctr}
\newenvironment{publist}{
\begin{list}{[\arabic{pubctr}]} 
    {
     \usecounter{pubctr}
     \setlength{\leftmargin}{2.5em}
     \setlength{\itemindent}{0em}
     \setlength{\labelsep}{1em}
     \setlength{\rightmargin}{0em}
     \setlength{\topsep}{0ex}
     \setlength{\parsep}{0ex}
     \setlength{\itemsep}{0ex} 
     \setlength{\listparindent}{0pt} 
    }}
{\end{list}}

\makeatletter
\renewcommand\normalsize{
  \@setfontsize\normalsize{12pt}{12pt} 
  \setlength\abovedisplayskip{4pt}
  \setlength\abovedisplayshortskip{4pt}
  \setlength\belowdisplayskip{\abovedisplayskip}
  \setlength\belowdisplayshortskip{\abovedisplayshortskip}
  \setlength{\baselineskip}{20pt} 
  \let\@listi\@listI}
\def\defaultfont{\renewcommand{\baselinestretch}{1.0}\normalsize\selectfont}
\renewcommand{\CJKglue}{\hskip -0.08pt plus 0.08\baselineskip} 

\makeatother

\renewcommand{\contentsname}{目\qquad 录}
\setcounter{tocdepth}{3}
\titlecontents{chapter}[0em]{\vspace{0pt}\xiaosi\song}
             {\prechaptername~{\thecontentslabel}~\postchaptername\quad}{}
             {\hspace{.5em}\titlerule*[5pt]{.}\xiaosi\contentspage}
\titlecontents{section}[2em]{\vspace{0pt}\xiaosi\song}
            {\thecontentslabel\quad}{}
            {\hspace{.5em}\titlerule*[5pt]{.}\xiaosi\contentspage}
\titlecontents{subsection}[4em]{\vspace{0pt}\xiaosi\song}
            {\thecontentslabel\quad}{}
            {\hspace{.5em}\titlerule*[5pt]{.}\xiaosi\contentspage}
\titlecontents{subsubsection}[6em]{\vspace{0pt}\xiaosi\song}
            {\thecontentslabel\quad}{}
            {\hspace{.5em}\titlerule*[5pt]{.}\xiaosi\contentspage}

\setcounter{secnumdepth}{4}
\setlength{\parindent}{2em}
\renewcommand{\chaptername}{\prechaptername~{\thechapter}~\postchaptername}
\titleformat{\chapter}{\centering\xiaosan\hei}{\chaptername}{1em}{}
\titlespacing{\chapter}{0pt}{33pt}{33pt}
\titleformat{\section}{\sihao\hei}{\thesection}{1em}{}
\titlespacing{\section}{0pt}{21pt}{21pt}
\titleformat{\subsection}{\sihao\hei}{\thesubsection}{1em}{}
\titlespacing{\subsection}{0pt}{13pt}{13pt}
\titleformat{\subsubsection}{\xiaosi\hei}{\thesubsubsection}{1em}{}
\titlespacing{\subsubsection}{0pt}{10pt}{10pt}

\renewcommand{\tablename}{表}
\renewcommand{\figurename}{图} 
\renewcommand{\thefigure}{\arabic{chapter}-\arabic{figure}} 
\renewcommand{\thetable}{\arabic{chapter}-\arabic{table}}
\renewcommand{\theequation}{\arabic{chapter}-\arabic{equation}}
\renewcommand{\thesubfigure}{(\alph{subfigure})}
\renewcommand{\thesubtable}{(\alph{subtable})}
\makeatletter
\renewcommand{\p@subfigure}{\thefigure~}
\makeatother

\makeatletter
\long\def\@makecaption#1#2{
   \vskip\abovecaptionskip
   \sbox\@tempboxa{\centering\wuhao\song{#1\quad #2} }
   \ifdim \wd\@tempboxa >\hsize
     \centering\wuhao\song{#1\quad #2} \par
   \else
     \global \@minipagefalse
     \hb@xt@\hsize{\hfil\box\@tempboxa\hfil}
   \fi
   \vskip\belowcaptionskip}
\makeatother
\captiondelim{~~~~}

\theoremstyle{plain}
\theorembodyfont{\song\rmfamily}
\theoremheaderfont{\hei\rmfamily}
\newtheorem{theorem}{定理~}[chapter]
\newtheorem{lemma}{引理~}[chapter]
\newtheorem{axiom}{公理~}[chapter]
\newtheorem{proposition}{命题~}[chapter]
\newtheorem{corollary}{推论~}[chapter]
\newtheorem{definition}{定义~}[chapter]
\newtheorem{conjecture}{猜想~}[chapter]
\newtheorem{example}{例~}[chapter]
\newtheorem{remark}{注~}[chapter]
\newtheorem{algorithm}{算法~}[chapter]
\newenvironment{proof}{\noindent{\hei 证明：}}{\hfill $ \square $ \vskip 4mm}
\theoremsymbol{$\square$}

\makeatletter
\renewcommand\frontmatter{\clearpage
  \@mainmatterfalse
  \pagenumbering{Roman}}
\makeatother

\renewcommand{\bibname}{参考文献}
\makeatletter
\renewenvironment{thebibliography}[1]{
   \chapter*{\bibname}
   \xiaosi
   \list{\@biblabel{\@arabic\c@enumiv}}
        {\renewcommand{\makelabel}[1]{##1\hfill}
         \setlength{\baselineskip}{17pt}
         \settowidth\labelwidth{0.5cm}
         \setlength{\labelsep}{0pt}
         \setlength{\itemindent}{0pt}
         \setlength{\leftmargin}{\labelwidth+\labelsep}
         \addtolength{\itemsep}{-0.7em}
         \usecounter{enumiv}
         \let\p@enumiv\@empty
         \renewcommand\theenumiv{\@arabic\c@enumiv}}
    \sloppy\frenchspacing
    \clubpenalty4000
    \@clubpenalty \clubpenalty
    \widowpenalty4000
    \interlinepenalty4000
    \sfcode`\.\@m}
   {\def\@noitemerr
     {\@latex@warning{Empty `thebibliography' environment}}
    \endlist\frenchspacing}
\makeatother

\addtolength{\bibsep}{3pt} 
\setlength{\bibhang}{2em}

\makeatletter
    \def\@cite#1#2{\textsuperscript{[{#1\if@tempswa , #2\fi}]}}
\makeatother
\bibpunct{[}{]}{,}{s}{}{,}

\makeatletter

\long\def\cabstract#1{\long\def\@cabstract{#1}}\long\def\@cabstract{}
\long\def\eabstract#1{\long\def\@eabstract{#1}}\long\def\@eabstract{}
\def\ckeywords#1{\def\@ckeywords{#1}}\def\@ckeywords{}
\def\ekeywords#1{\def\@ekeywords{#1}}\def\@ekeywords{}

\pagestyle{fancy}

\renewcommand{\chaptermark}[1]{\markboth{\chaptername~\ #1}{}}
  \fancyhf{}
  \fancyhead[CO]{\song\wuhao \leftmark}
  \fancyhead[CE]{\song\wuhao 天津大学博士学位论文} %%%%%这里按需改成“博士”或“硕士”
  \fancyfoot[C]{\song\xiaowu ~\thepage~}
  \renewcommand{\headrulewidth}{0.7pt}
  \renewcommand{\footrulewidth}{0pt}

\fancypagestyle{plain}{
    \fancyhf{}
    \fancyhead[C]{\song\wuhao \leftmark}
    \fancyfoot[C]{\song\xiaowu ~\thepage~ }
    \renewcommand{\headrulewidth}{0.7pt}
    \renewcommand{\footrulewidth}{0pt}
}

\fancypagestyle{only_foot}{
    \fancyhf{}
    \fancyfoot[C]{\song\xiaowu ~\thepage~ }
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\footrulewidth}{0pt}
}


\newlength{\@title@width}
\def\@put@covertitle#1{\makebox[\@title@width][s]{#1}}
\def\makecover{

\clearpage{\pagestyle{empty}\cleardoublepage} 
\markboth{摘~要}{摘~要}
\chapter*{\centering\song\erhao\textbf{摘\qquad 要}}
\thispagestyle{only_foot}

\setcounter{page}{1}
\song\defaultfont
\@cabstract

\noindent
{\song\sihao \textbf{关键词：}} \@ckeywords

\clearpage{\pagestyle{empty}\cleardoublepage} 
\markboth{ABSTRACT}{ABSTRACT}
\chapter*{\centering\erhao\textbf{ABSTRACT}}
\thispagestyle{only_foot}
\@eabstract

\noindent
{\sihao\textbf{KEY WORDS：}}  \@ekeywords
}

\makeatother
